<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>營養師系統</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <style>
    body { background-color:#f5f5f5; font-family:"Noto Sans TC", sans-serif; }
    .header-bar{
      background: linear-gradient(135deg, #2f2f2f, #3c3c3c);
      color:#fff; padding: 18px 0; text-align:center;
      position: relative;
    }
    .header-bar h1{ margin:0; font-weight:800; font-size:1.5rem; }
    .header-right{
      position:absolute; right:16px; top:50%; transform: translateY(-50%);
      text-align:right; line-height:1.25; white-space:nowrap;
    }
    @media (max-width: 576px){
      .header-right{ position: static; transform:none; margin-top:10px; text-align:center; white-space:normal; }
      .header-bar{ padding: 18px 0 12px; }
    }
    .wrap{ max-width:1100px; margin:28px auto; padding:0 16px; }

    .menu-grid{
      display:grid; gap:20px; justify-content:center;
      grid-template-columns: repeat(3, 1fr);
    }
    @media (max-width: 991px){ .menu-grid{ grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 576px){ .menu-grid{ grid-template-columns: repeat(1, 1fr);} }

    .menu-item{
      text-decoration:none;
      background:#fff;
      color:#222;
      border-radius:18px;
      text-align:center;
      padding: 26px 12px;
      font-weight:700;
      box-shadow: 0 2px 10px rgba(0,0,0,.10);
      border:1px solid rgba(0,0,0,.06);
      transition: transform .15s ease, box-shadow .15s ease;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      min-height: 150px;
    }
    .menu-item:hover{ transform: translateY(-3px); box-shadow: 0 6px 18px rgba(0,0,0,.14); }
    .menu-item i{ font-size:2.4rem; margin-bottom: 12px; }
    .menu-desc{ margin-top: 6px; font-size:.9rem; color:#666; font-weight:500; line-height:1.35; }

    .card-login{ background:#fff; border-radius:18px; box-shadow: 0 2px 10px rgba(0,0,0,.10); border:1px solid rgba(0,0,0,.06); }
    footer{ text-align:center; padding: 22px 0; font-size:.9rem; color:#888; }
  </style>
</head>
<body>
  <div class="header-bar">
    <h1>營養師系統</h1>

    <!-- ✅ 右上角顯示登入者（參考辦公室系統） -->
    <div id="loginInfoNutritionist" class="header-right small d-none">
      <div>登入者：</div>
      <div><span id="loginStaffId-nutritionist"></span> <span id="loginStaffName-nutritionist"></span></div>
      <button id="logoutBtnNutritionist" class="btn btn-sm btn-outline-light mt-1">登出</button>
    </div>
  </div>

  <div class="wrap">

    <!-- ✅ 登入區（需要帳號密碼） -->
    <div id="login-section-nutritionist" class="card-login p-4" style="max-width: 720px; margin: 0 auto;">
      <h5 class="fw-bold mb-3">請輸入個人帳號密碼</h5>

      <div class="row g-2 mb-2">
        <div class="col-md-6">
          <input type="text" id="usernameInput-nutritionist" class="form-control" placeholder="帳號（員工編號）" autocomplete="username">
        </div>
        <div class="col-md-6">
          <input type="password" id="passwordInput-nutritionist" class="form-control" placeholder="密碼" autocomplete="current-password">
        </div>
      </div>

      <div class="d-flex gap-2 mb-3">
        <button id="loginButton-nutritionist" class="btn btn-primary">
          <i class="fas fa-right-to-bracket me-1"></i>登入
        </button>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="privacyCheck-nutritionist">
        <label class="form-check-label" for="privacyCheck-nutritionist">
          我同意 <a href="../privacy-policy.html" target="_blank">《安泰醫療社團法人附設安泰護理之家服務系統使用協議》</a>
        </label>
      </div>

      <div id="errorMessage-nutritionist" class="text-danger d-none">登入失敗，請確認帳號/密碼與權限設定。</div>

      <div class="text-muted small">
        ※ 若尚未建立帳號請告知主任。
      </div>

      <div class="mt-3 d-flex gap-2">
        <a class="btn btn-sm btn-outline-secondary" href="../affairs.html">
          <i class="fas fa-arrow-left me-2"></i>返回事務系統
        </a>
        <a class="btn btn-sm btn-outline-secondary" href="../index.html">
          <i class="fas fa-home me-2"></i>返回首頁
        </a>
      </div>
    </div>

    <!-- ✅ 主選單（登入後顯示） -->
    <div id="dashboard-section-nutritionist" class="d-none">
      <div class="menu-grid">
        <a href="./nutritionist-meals.html" class="menu-item">
          <i class="fas fa-utensils"></i>
          <div>餐食系統</div>
          <div class="menu-desc">正常餐／剁碎餐／攪打餐<br>可匯出 Excel、可列印、寫入 Firebase</div>
        </a>

        <a href="./nutritionist-tube.html" class="menu-item">
          <i class="fas fa-syringe"></i>
          <div>管灌飲食系統</div>
          <div class="menu-desc">多分頁<br>可匯出 Excel、可列印、寫入 Firebase</div>
        </a>

        <a href="../consult.html" class="menu-item">
          <i class="fas fa-file-signature"></i>
          <div>照會系統</div>
          <div class="menu-desc">查看護理師照會並回覆<br>可上傳附件、即時通知</div>
        </a>

        <!-- ✅ 返回時直接回事務儀表板 -->
        <a href="../affairs.html" class="menu-item">
          <i class="fas fa-arrow-left"></i>
          <div>返回事務系統</div>
          <div class="menu-desc">回到事務系統儀表板</div>
        </a>
      </div>

      <div class="text-center mt-4">
        <a class="btn btn-outline-secondary" href="../index.html">
          <i class="fas fa-home me-2"></i>返回首頁
        </a>
      </div>
    </div>

  </div>

  <footer>© 2025 Copyright. All Rights Reserved.</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
  <script src="../firebase-init.js"></script>
  <script src="./nutritionist-auth.js"></script>
</body>
</html>
